/**
 * Step Group Components
 * ====================
 * 
 * Styling for group containers, headers, and collapse functionality
 */

/**
 * Step Group Container
 * Main container for grouped steps with collapse functionality
 */
#group-container .step-group {
    margin-bottom: var(--spacing-xl);
    border-radius: var(--border-radius-xl);
    overflow: hidden;
    background: var(--c-bg-surface-1);
    border: 1px solid var(--c-border);
    box-shadow: 0 4px 16px var(--c-shadow);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

#group-container .step-group:hover {
    box-shadow: 0 8px 32px var(--c-shadow-lg);
}

/**
 * Group Header
 * Contains group title and collapse button - entire header is clickable
 */
#group-container .step-group .group-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-lg);
    background: linear-gradient(135deg, var(--c-bg-surface-2), var(--c-bg-surface-hover));
    border-bottom: 1px solid var(--c-border);
    cursor: pointer;
    transition: all 0.3s ease;
    user-select: none;
    position: relative;
}

#group-container .step-group .group-header:hover {
    background: linear-gradient(135deg, var(--c-bg-surface-hover), var(--c-primary-light));
}

/**
 * Group Collapse Button
 * Visual indicator only - header handles the click
 */
.group-collapse-btn {
    background: none;
    border: none;
    padding: var(--spacing-sm);
    border-radius: var(--border-radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    color: var(--c-text-secondary);
    pointer-events: none; /* Prevent button from capturing clicks */
    position: relative;
    z-index: 2;
}

/* Icon hover effect triggered by header hover */
#group-container .step-group .group-header:hover .group-collapse-btn {
    background: var(--c-bg-surface-1);
    color: var(--c-primary);
    transform: scale(1.1);
}

.group-collapse-btn .collapse-icon {
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/**
 * Group Title
 * Main title for the group
 */
#group-container .step-group .group-title {
    font-size: 1.4em;
    font-weight: 700;
    color: var(--c-text-primary);
    text-shadow: 0 1px 2px var(--c-shadow);
    flex: 1;
}

/**
 * Group Stats
 * Shows completion progress for the group
 */
.group-stats {
    font-size: 0.9em;
    font-weight: 600;
    color: var(--c-text-secondary);
    background: var(--c-bg-surface-1);
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--border-radius-md);
    border: 1px solid var(--c-border);
}

/**
 * Group Body
 * Contains all steps in the group
 */
#group-container .step-group .group-body {
    padding: var(--spacing-lg);
    background: var(--c-bg-surface-1);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/**
 * Collapsed State
 * Styling for collapsed groups - matches JavaScript class
 */
.step-group.collapsed .group-body {
    max-height: 0;
    padding: 0 var(--spacing-lg);
    overflow: hidden;
    opacity: 0;
}

.step-group.collapsed .group-collapse-btn .collapse-icon {
    transform: rotate(-90deg);
}

.step-group.collapsed .group-header {
    border-bottom: none;
}

/**
 * Expanded State Animation
 * Smooth expansion animation
 */
.step-group:not(.collapsed) .group-body {
    max-height: none;
    opacity: 1;
}

/**
 * Mobile Responsive Adjustments
 */
@media (max-width: 768px) {
    #group-container .step-group .group-header {
        padding: var(--spacing-md);
    }
    
    #group-container .step-group .group-title {
        font-size: 1.2em;
    }
    
    .group-stats {
        font-size: 0.8em;
    }
}

@media (max-width: 480px) {
    #group-container .step-group .group-body {
        padding: var(--spacing-md);
    }
    
    .step-group.collapsed .group-body {
        padding: 0 var(--spacing-md);
    }
}