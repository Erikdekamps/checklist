/**
 * Header Controls
 * ===============
 * 
 * Styling for search, filter, and action controls in the header
 */

/**
 * Controls Container
 * Main container for all header controls
 */
.header-controls {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-lg);
    padding: var(--spacing-md) var(--spacing-lg);
    background: linear-gradient(135deg, var(--c-bg-surface-1), var(--c-bg-surface-2));
    border-top: 1px solid var(--c-border);
    border-bottom: 1px solid var(--c-border);
    flex-wrap: wrap;
}

/**
 * Search Section
 * Contains search input with icon and clear button
 */
.search-section {
    flex: 1;
    min-width: 280px;
}

.search-input-container {
    position: relative;
    display: flex;
    align-items: center;
}

.search-icon {
    position: absolute;
    left: var(--spacing-sm);
    z-index: 2;
    color: var(--c-text-secondary);
    pointer-events: none;
}

#search-input {
    width: 100%;
    padding: var(--spacing-sm) var(--spacing-xl) var(--spacing-sm) calc(var(--spacing-xl) + 4px);
    border: 1px solid var(--c-border);
    border-radius: var(--border-radius-lg);
    background: var(--c-bg-surface-1);
    color: var(--c-text-primary);
    font-size: 0.9em;
    transition: all 0.2s ease;
}

#search-input:focus {
    outline: none;
    border-color: var(--c-primary);
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--c-primary) 20%, transparent);
}

#search-input::placeholder {
    color: var(--c-text-secondary);
}

.search-clear {
    position: absolute;
    right: var(--spacing-sm);
    background: none;
    border: none;
    padding: var(--spacing-xs);
    border-radius: var(--border-radius-md);
    cursor: pointer;
    color: var(--c-text-secondary);
    opacity: 0;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.search-clear:hover {
    background: var(--c-bg-surface-hover);
    color: var(--c-danger);
}

.search-clear:active {
    opacity: 0.8;
}

.search-clear.visible {
    opacity: 1;
}

/**
 * Filter Section
 * Contains filter buttons
 */
.filter-section {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.filter-group {
    display: flex;
    background: var(--c-bg-surface-2);
    border-radius: var(--border-radius-lg);
    padding: 2px;
    border: 1px solid var(--c-border);
}

.filter-btn {
    padding: var(--spacing-sm) var(--spacing-md);
    border: none;
    background: none;
    color: var(--c-text-secondary);
    font-size: 0.85em;
    font-weight: 500;
    border-radius: calc(var(--border-radius-lg) - 2px);
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
    position: relative;
}

.filter-btn:hover {
    background: var(--c-bg-surface-hover);
    color: var(--c-text-primary);
}

/**
 * Filter Button Active State (when clicked)
 * Ensures text remains visible during click
 */
.filter-btn:active {
    opacity: 0.9;
    color: var(--c-text-primary);
    background: var(--c-bg-surface-hover);
}

/**
 * Filter Button Selected State (when filter is active)
 * Different from :active - this is when the filter is currently selected
 */
.filter-btn.active {
    background: linear-gradient(135deg, var(--c-primary), var(--c-primary-light));
    color: white;
    box-shadow: 0 2px 8px color-mix(in srgb, var(--c-primary) 30%, transparent);
}

.filter-btn.active:hover {
    background: linear-gradient(135deg, var((--c-primary-light)), var(--c-primary));
    color: white;
}

/**
 * Filter Button Active State when Selected
 * When clicking on an already selected filter button
 */
.filter-btn.active:active {
    opacity: 0.95;
    color: white;
    background: var(--c-primary-dark);
}

/**
 * Action Section
 * Contains action buttons
 */
.action-section {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.action-btn {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    padding: var(--spacing-sm) var(--spacing-md);
    border: 1px solid var(--c-border);
    background: linear-gradient(135deg, var(--c-bg-surface-1), var(--c-bg-surface-2));
    color: var(--c-text-primary);
    font-size: 0.85em;
    font-weight: 500;
    border-radius: var(--border-radius-lg);
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
    position: relative;
}

.action-btn:hover {
    background: linear-gradient(135deg, var(--c-bg-surface-hover), color-mix(in srgb, var(--c-primary) 10%, var(--c-bg-surface-hover)));
    border-color: var(--c-primary);
    box-shadow: 0 4px 12px var(--c-shadow);
}

/**
 * Action Button Active State
 * Ensures text remains visible when clicked
 */
.action-btn:active {
    opacity: 0.95;
    color: var(--c-text-primary);
    background: var(--c-bg-surface-hover);
    box-shadow: 0 2px 6px var(--c-shadow);
}

.action-btn svg {
    flex-shrink: 0;
    transition: opacity 0.2s ease;
}

/**
 * Toggle Button States
 * Show/hide icons based on button state
 */
#toggle-all-btn[data-state="expand"] .expand-icon {
    opacity: 1;
}

#toggle-all-btn[data-state="expand"] .collapse-icon {
    opacity: 0;
    position: absolute;
}

#toggle-all-btn[data-state="collapse"] .expand-icon {
    opacity: 0;
    position: absolute;
}

#toggle-all-btn[data-state="collapse"] .collapse-icon {
    opacity: 1;
}

/**
 * Mobile Responsive Adjustments
 */
@media (max-width: 768px) {
    .header-controls {
        flex-direction: column;
        gap: var(--spacing-md);
        align-items: stretch;
    }
    
    .search-section {
        min-width: auto;
        order: 1;
    }
    
    .filter-section {
        order: 2;
        justify-content: center;
    }
    
    .action-section {
        order: 3;
        justify-content: center;
    }
    
    .action-btn .button-text {
        display: none;
    }
    
    .action-btn {
        padding: var(--spacing-sm);
    }
}

@media (max-width: 480px) {
    .header-controls {
        padding: var(--spacing-sm);
    }
    
    .filter-group {
        width: 100%;
    }
    
    .filter-btn {
        flex: 1;
        text-align: center;
    }
    
    .action-section {
        width: 100%;
        justify-content: center;
    }
}